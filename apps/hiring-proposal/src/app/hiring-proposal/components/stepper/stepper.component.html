<mat-card class="stepper">
  <div class="stepper__title">
    <div class="stepper__title__container">
      <span class="stepper__title__black"> {{ offerName }}, realize a sua oferta de {{ typeOffer }}: </span>
    </div>

    <div #hour></div>
    <div #minute></div>
    <div #total></div>

    <div class="d-flex flex-column">
      <ecCountDown
        (value)="hour.text = $event?.hour; minute.text = $event?.minute; total.text = $event?.total"
        (checkExpired)="tolerance()"
        [checkDateTime]="quotation?.proposalSubmission"
        [toleranceTime]="toleranceTimer"
        (checkToleranceExpired)="toleranceExpired()"
      >
        <mat-progress-spinner class="example-margin" [color]="color" [mode]="mode" [value]="total.text" [diameter]="60">
        </mat-progress-spinner>
        <span class="stepper__text-position">{{ minute.text }}’</span>
      </ecCountDown>
      <span class="stepper__tolerance" *ngIf="isTolerance">tolerância</span>
    </div>
  </div>

  <mat-tab-group [selectedIndex]="selected.value" (selectedTabChange)="onTabChanged($event)">
    <mat-tab label="Energia" [disabled]="resources.stepperControls.get(STEPPER_NUMBER_ENERGY)">
      <ec-energy [quotation]="quotation" (changedStep)="changedStep($event)"></ec-energy>
    </mat-tab>
    <mat-tab label="Customização" [disabled]="resources.stepperControls.get(STEPPER_NUMBER_CUSTOMIZATION)">
      <ng-template matTabContent>
        <ec-customization (backedStep)="setStep($event)" (changedStep)="changedStep($event)"></ec-customization>
      </ng-template>
    </mat-tab>
    <mat-tab label="Financeiro" [disabled]="resources.stepperControls.get(STEPPER_NUMBER_FINANCIAL)">
      <ng-template matTabContent>
        <ec-financial (backedStep)="setStep($event)" (changedStep)="changedStep($event)"></ec-financial>
      </ng-template>
    </mat-tab>
    <mat-tab label="Dados cadastrais" [disabled]="resources.stepperControls.get(STEPPER_NUMBER_REGISTRATION)">
      <ng-template matTabContent>
        <ec-registration-data
          [quotation]="quotation"
          [offerName]="offerName"
          (backedStep)="setStep($event)"
          (changedStep)="changedStep($event)"
        ></ec-registration-data>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</mat-card>
